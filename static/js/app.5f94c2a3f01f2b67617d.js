webpackJsonp([2,0],{0:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var a=n(7),d=r(a),i=n(31),o=r(i);n(28),new d.default({el:"#app",template:"<App/>",components:{App:o.default}})},8:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(9),d=r(a),i=n(11),o=r(i),s=n(7),c=r(s),l=n(27),u=r(l),f=n(30),p=r(f),m=n(29),v=r(m),h=n(26),b=window.Blob,x=window.localStorage,k=window.Event,w=n(24),_=function(){return[{type:"lang",regex:/(docs\.google\.com\/document\/d\/[\w-]+)\/edit#bookmark=/g,replace:"$1/pub#"},{type:"output",regex:/<img src="(data:([^;]+);[^"]+)" alt="([^"]*)" \/>/g,replace:'<object type="$2" data="$1">$3</object>'}]},C=function(){function t(){var t=new p.default.Converter({extensions:[_]});return t.setOption("strikethrough",!0),t.setOption("headerLevelStart",3),t.setOption("noHeaderId",!0),t.setOption("tables",!0),t}var e=null;return{getInstance:function(){return e||(e=t()),e}}}();c.default.config.keyCodes={d:68,s:83},c.default.component("my-input",{props:["card","index","doThenPersist"],template:'<div class="card mdl-card mdl-shadow--4dp"><div class="remove mdl-card__menu"><button class="remove mdl-button mdl-js-button mdl-button--icon" type="submit" v-on:click.prevent="removeThis"><i class="material-icons">delete</i></button></div><div class="mdl-card__title mdl-card--border"><div class="front-view" v-html="card.front"></div></div><div class="mdl-card__supporting-text mdl-card--border"><div class="back-view" v-html="card.back"></div></div><div class="input-area mdl-card__actions mdl-card--border" @keydown.meta.d.prevent="duplicateEvent" @keydown.alt.tab.prevent="previousField" @keydown.alt.down="nextEvent" @keydown.alt.up="previousEvent"><div class="mdl-textfield mdl-js-textfield"><textarea ref="frontInput" :id="\'front-input\'+index" class="front mdl-textfield__input" :rows="frontTextRows" v-model="card.frontText"></textarea><label class="mdl-textfield__label" :for="\'front-input\'+index">Modify content on the front here...</label></div><div class="mdl-textfield mdl-js-textfield"><textarea  ref="backInput" :id="\'back-input\'+index" class="back mdl-textfield__input" :rows="backTextRows" v-model="card.backText"></textarea><label class="mdl-textfield__label" for="\'back-input\'+index">Modify content on the back here...</label></div><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><input ref="urlInput" :id="\'url-input\'+index" class="url-input mdl-textfield__input" type="text" v-model="card.url"><label class="mdl-textfield__label" :for="\'url-input\'+index">URL of Note</label></div></div></div>',created:function(){this.renderFront(),this.renderBack()},mounted:function(){w.upgradeElements(this.$el)},updated:function(){var t=new k("input");u.default.map(this.$refs,function(e){return e.dispatchEvent(t)})},beforeDestroy:function(){w.downgradeElements(this.$el)},data:function(){return{debounce:100,timer:[0,0,0]}},watch:{"card.frontText":function(){var t=this;clearTimeout(this.timer[0]),this.timer[0]=setTimeout(function(){return t.doThenPersist(t.renderFront)},this.debounce)},"card.backText":function(){var t=this;clearTimeout(this.timer[1]),this.timer[1]=setTimeout(function(){return t.doThenPersist(t.renderBack)},this.debounce)},"card.url":function(){var t=this;clearTimeout(this.timer[2]),this.timer[2]=setTimeout(function(){return t.doThenPersist(t.renderBack)},this.debounce)}},methods:{activateCard:function(){var t=this.$refs.frontInput;this.activateElement(t)},activateElement:function(t){t.focus(),t.select()},nextEvent:function(){this.$emit("next",this)},previousEvent:function(){this.$emit("previous",this)},previousField:function(){var t,e=document.activeElement,n=this.$refs,r=(t={},(0,o.default)(t,n.frontInput,null),(0,o.default)(t,n.backInput,n.frontInput),(0,o.default)(t,n.urlInput,n.backInput),t),a=r[e];a&&this.activateElement(a)},duplicateEvent:function(){this.$emit("duplicate",this.card)},renderFront:function(){var t=this.card.frontText||"### Front of the Card Preview";this.card.front=this.renderMarkdown(t)},renderBack:function(){var t=this.card.backText||"### Back of the Card Preview",e=this.card.url?"\n\n[note]("+this.card.url+")":"";this.card.back=this.renderMarkdown(t+e)},renderMarkdown:function(t){var e=C.getInstance();return e.makeHtml(t)},removeThis:function(){this.$emit("remove",this.card)},numRow:function(t){return t.split("\n").length+1}},computed:{frontTextRows:function(){return this.numRow(this.card.frontText)},backTextRows:function(){return this.numRow(this.card.backText)}}});var y={cards:[],oldCards:null},T=x.getItem("data")?JSON.parse(x.getItem("data")):u.default.cloneDeep(y),g={front:"",back:"",frontText:"",backText:"",url:""};e.default={name:"app",data:function(){return u.default.cloneDeep(T)},methods:{newCard:function(){var t=this;this.addNewCard(),setTimeout(function(){return u.default.last(t.$children).activateCard()})},addNewCard:function(t){var e=t||g,n=JSON.parse((0,d.default)(e));this.cards.push(n)},duplicateCard:function(t){this.addNewCard(t)},displayTsv:function(){var t=this.cards,e=v.default.unparse(t,{delimiter:"\t",header:!1});console.log(e)},downloadCsv:function(){var t=this.cards,e=v.default.unparse(t),n=new b([e],{type:"text/csv"});(0,h.saveAs)(n,"output.csv"),this.displayTsv()},removeCard:function(t){this.backup();var e=this.cards.indexOf(t);e!==-1&&this.cards.splice(e,1),this.persist()},activatePreviousCard:function(t){var e=this.$children.indexOf(t);e>0&&this.$children[e-1].activateCard()},activateNextCard:function(t){var e=this.$children.indexOf(t);e<this.$children.length-1&&this.$children[e+1].activateCard()},persist:function(){x.setItem("data",(0,d.default)(this.$data))},doThenPersist:function(t){t(),this.persist()},reset:function(){this.backup();var t=u.default.cloneDeep(y);this.cards=t.cards,x.removeItem("data")},backup:function(){this.oldCards=u.default.clone(this.cards)},restore:function(){this.cards=this.oldCards,this.oldCards=null}}}},25:function(t,e){},31:function(t,e,n){var r,a;n(25),r=n(8);var d=n(32);a=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(a=r=r.default),"function"==typeof a&&(a=a.options),a.render=d.render,a.staticRenderFns=d.staticRenderFns,t.exports=r},32:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("form",{on:{keydown:[function(e){t._k(e.keyCode,"s")||e.metaKey&&(e.preventDefault(),t.downloadCsv(e))},function(e){t._k(e.keyCode,"enter",13)||e.metaKey&&(e.preventDefault(),t.newCard(e))}]}},[t._l(t.cards,function(e,r){return n("my-input",{key:"card.frontText+index",attrs:{card:e,index:r,"do-then-persist":t.doThenPersist},on:{duplicate:t.duplicateCard,remove:t.removeCard,next:t.activateNextCard,previous:t.activatePreviousCard}})}),t._v(" "),n("p",{staticClass:"card-num"},[t._v("There are currently "),n("span",{domProps:{textContent:t._s(t.cards.length)}}),t._v(" cards.")]),t._v(" "),n("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent",attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.newCard(e)}}},[t._v("Add New Card")]),t._v(" "),n("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored",attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.downloadCsv(e)}}},[t._v("Download CSV File")]),t._v(" "),n("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored",attrs:{type:"submit",disabled:!t.oldCards},on:{click:function(e){e.preventDefault(),t.restore(e)}}},[t._v("Undelete Card")]),t._v(" "),n("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored",attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.reset(e)}}},[t._v("Reset")])],2)])},staticRenderFns:[]}}});
//# sourceMappingURL=app.5f94c2a3f01f2b67617d.js.map